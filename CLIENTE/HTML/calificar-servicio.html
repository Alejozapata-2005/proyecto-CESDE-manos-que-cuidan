<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>Calificar Servicio</title>
    <link rel="stylesheet" href="../CSS/style.css" />
    <style>
      .stars span {
        font-size: 2rem;
        cursor: pointer;
        color: gray;
      }
      .stars span.active {
        color: gold;
      }
    </style>
  </head>
  <link rel="icon" href="/redsas/IMG/favicon-32x32.png" type="image/png" />
  <body>
    <script>
      // Validaci√≥n de rol
      if (
        !localStorage.getItem("rol") ||
        localStorage.getItem("rol") !== "cliente"
      ) {
        window.location.href = "../LOGIN/login.html";
      }
    </script>

    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-logo">
        <img src="../../img/manos que cuidan.png" height="60" />
      </div>
      <ul class="sidebar-menu">
        <li><a href="solicitar-servicio.html">üìù Solicitar Servicio</a></li>
        <li><a href="mis-solicitudes.html">üìÇ Mis Solicitudes</a></li>
        <li>
          <a href="calificar-servicio.html" class="active"
            >‚≠ê Calificar Servicio</a
          >
        </li>
        <li><a href="calendario.html">üìÖ Calendario</a></li>
        <li class="logout">
          <a href="../../LOGIN/login.html" id="btnsalir"
            >------ Cerrar Sesi√≥n------</a
          >
        </li>
      </ul>
    </aside>

    <!-- Contenido -->
    <div class="main-content">
      <h1>Calificar Servicio</h1>
      <form class="form-card" id="form-calificacion">
        <label for="servicio">Servicio:</label>
        <select id="servicio">
          <option value="">Seleccione</option>
          <option value="S-101">S-101 - Acompa√±amiento</option>
          <option value="S-102">S-102 - Cita m√©dica</option>
        </select>

        <label>Calificaci√≥n:</label>
        <div class="stars" id="stars">
          <span data-val="1">‚òÖ</span>
          <span data-val="2">‚òÖ</span>
          <span data-val="3">‚òÖ</span>
          <span data-val="4">‚òÖ</span>
          <span data-val="5">‚òÖ</span>
        </div>

        <label for="comentario">Comentario:</label>
        <textarea id="comentario" rows="4"></textarea>

        <button type="submit" class="btn">Enviar Calificaci√≥n</button>
      </form>
    </div>

    <script>
      <script>
        // L√≥gica de estrellas y submit
        const stars = document.querySelectorAll('#stars span');
        stars.forEach(star => {
          star.addEventListener('click', () => {
            stars.forEach(s => s.classList.remove('active'));
            star.classList.add('active');
            let prev = star.previousElementSibling;
            while (prev) {
              prev.classList.add('active');
              prev = prev.previousElementSibling;
            }
          });
        });

        document.getElementById("form-calificacion").addEventListener("submit", e => {
          e.preventDefault();
          alert("‚úÖ Calificaci√≥n enviada. ¬°Gracias por tu opini√≥n!");
        });

        // Handler de Cerrar Sesi√≥n (cliente)
        const btnSalir = document.getElementById('btnsalir');
        if (btnSalir) {
          btnSalir.addEventListener('click', function (e) {
            e.preventDefault();
            try {
              localStorage.removeItem('rol');
              localStorage.removeItem('nombre');
              localStorage.removeItem('token');
            } catch (err) {}
            window.location.href = '../../LOGIN/login.html';
          });
        }
    </script>
  </body>
  <script src="../JS/script.js"></script>
</html>
