<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>Chat con Admin</title>
    <link rel="stylesheet" href="../CSS/style.css" />
  </head>
  <link rel="icon" href="/redsas/IMG/favicon-32x32.png" type="image/png">
  <body>
<script>
      // Validación de rol
      if (
        !localStorage.getItem("rol") ||
        localStorage.getItem("rol") !== "usuario"
      ) {
        window.location.href = "../LOGIN/login.html";
      }
    </script>

    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-logo">
        <img src="../../IMG/manos que cuidan.png" alt="Logo" height="60" />
      </div>
      <ul class="sidebar-menu">
        <li><a href="servicios-dia.html">📅 Servicios del Día</a></li>
        <li><a href="reportes.html">📝 Reportes</a></li>
        <li><a href="perfil.html">👤 Perfil</a></li>
        <li><a href="soporte.html">🛠️ Soporte</a></li>
        <li><a href="historial.html">📖 Historial</a></li>
        <li><a href="chat-admin.html" class="active">💬 Chat con Admin</a></li>`
       <li class="logout"><a href="../../LOGIN/login.html" id="btnsalir">------ Cerrar Sesion------</a></li>
      </ul>
    </aside>

    <!-- Contenido -->
    <div class="main-content">
      <h1>Comunicación con Administrador</h1>
      <div class="chat-box">
        <div class="chat-messages" id="chat-messages">
          <div class="msg admin">[Admin] Hola, ¿cómo va tu jornada?</div>
          <div class="msg user">
            [Tú] Todo bien, ya terminé el primer servicio.
          </div>
        </div>
        <form class="chat-form" onsubmit="return false;">
          <input
            type="text"
            id="chat-input"
            placeholder="Escribe tu mensaje..."
          />
          <button class="btn">Enviar</button>
        </form>
      </div>
    </div>
    <script>
      // Handler de Cerrar Sesión (usuario)
      const btnSalir = document.getElementById('btnsalir');
      if (btnSalir) {
        btnSalir.addEventListener('click', function (e) {
          e.preventDefault();
          try {
            localStorage.removeItem('rol');
            localStorage.removeItem('nombre');
            localStorage.removeItem('token');
          } catch (err) {}
          window.location.href = '../../LOGIN/login.html';
        });
      }
    </script>

  </body>
   <script src="../JS/script.js"></script>
</html>
